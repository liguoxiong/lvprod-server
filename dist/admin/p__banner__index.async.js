(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"0XU1":function(e,t,a){e.exports={table:"table___1AWq3"}},"8GaP":function(e,t,a){e.exports={"avatar-uploader":"avatar-uploader___3VPI-","ant-upload":"ant-upload___IaARZ"}},"9xKt":function(e,t,a){"use strict";a.r(t);a("14J3");var n,r,i,l,o,c,s,d,m,u,p,h=a("BMrR"),f=(a("jCWc"),a("kPKH")),g=(a("P2fV"),a("NJEC")),y=(a("+L6B"),a("2/Rp")),v=a("p0pE"),E=a.n(v),k=a("2Taf"),b=a.n(k),C=a("vZ4D"),w=a.n(C),T=a("l4Ni"),I=a.n(T),R=a("ujKo"),_=a.n(R),P=a("MhPg"),D=a.n(P),F=a("q1tI"),O=a.n(F),x=(a("17x9"),a("7Qib")),S=a("MuoO"),V=a("ZD0w"),M=a("Kvkj"),j=a("Qyje"),A=(a("g9YV"),a("wCAj")),Y=a("jehZ"),U=a.n(Y),q=(a("Telt"),a("Tckk")),K=a("Y/ft"),B=a.n(K),L=(a("2qtc"),a("kLXV")),N=a("wY1l"),z=a.n(N),J=a("0XU1"),Q=a.n(J),Z=L["a"].confirm,G=(n=Object(V["withI18n"])(),n((i=function(e){function t(){var e,a;b()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=I()(this,(e=_()(t)).call.apply(e,[this].concat(r))),a.handleMenuClick=function(e,t){var n=a.props,r=n.onDeleteItem,i=n.onEditItem,l=n.i18n;"1"===t.key?i(e):"2"===t.key&&Z({title:l._("Are you sure delete this record?"),onOk:function(){r(e._id)}})},a}return D()(t,e),w()(t,[{key:"render",value:function(){var e=this,t=this.props,a=(t.onDeleteItem,t.onEditItem,t.i18n),n=B()(t,["onDeleteItem","onEditItem","i18n"]),r=[{title:O.a.createElement(V["Trans"],{id:"Image"}),dataIndex:"image",key:"image",width:72,fixed:"left",render:function(e){return O.a.createElement(q["a"],{style:{marginLeft:8},src:e})}},{title:O.a.createElement(V["Trans"],{id:"Title"}),dataIndex:"title",key:"title",render:function(e,t){return O.a.createElement(z.a,{to:"banner/".concat(t._id)},e)}},{title:O.a.createElement(V["Trans"],{id:"Description"}),dataIndex:"description",key:"description"},{title:O.a.createElement(V["Trans"],{id:"CreateAt"}),dataIndex:"created_at",key:"created_at"},{title:O.a.createElement(V["Trans"],{id:"Operation"}),key:"operation",fixed:"right",render:function(t,n){return O.a.createElement(M["a"],{onMenuClick:function(t){return e.handleMenuClick(n,t)},menuOptions:[{key:"1",name:a._("Update")},{key:"2",name:a._("Delete")}]})}}];return O.a.createElement(A["a"],U()({},n,{pagination:E()({},n.pagination,{showTotal:function(e){return a._("Total {total} Items",{total:e})}}),className:Q.a.table,bordered:!0,scroll:{x:1200},columns:r,simple:!0,rowKey:function(e){return e._id}}))}}]),t}(F["PureComponent"]),r=i))||r),W=G,X=(a("6UJt"),a("DFOY")),H=(a("y8nQ"),a("Vl3Y")),$=(a("iQDF"),a("+eQT")),ee=(a("5NDa"),a("5rEg")),te=a("wd/R"),ae=a.n(te),ne=a("Lo71"),re=ee["a"].Search,ie=$["a"].RangePicker,le={xs:24,sm:12,style:{marginBottom:16}},oe=E()({},le,{xl:96}),ce=(l=Object(V["withI18n"])(),o=H["a"].create(),l(c=o((s=function(e){function t(){var e,a;b()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=I()(this,(e=_()(t)).call.apply(e,[this].concat(r))),a.handleFields=function(e){var t=e.createTime;return t.length&&(e.createTime=[ae()(t[0]).format("YYYY-MM-DD"),ae()(t[1]).format("YYYY-MM-DD")]),e},a.handleSubmit=function(){var e=a.props,t=e.onFilterChange,n=e.form,r=n.getFieldsValue,i=r();i=a.handleFields(i),t(i)},a.handleReset=function(){var e=a.props.form,t=e.getFieldsValue,n=e.setFieldsValue,r=t();for(var i in r)({}).hasOwnProperty.call(r,i)&&(r[i]instanceof Array?r[i]=[]:r[i]=void 0);n(r),a.handleSubmit()},a.handleChange=function(e,t){var n=a.props,r=n.form,i=n.onFilterChange,l=r.getFieldsValue,o=l();o[e]=t,o=a.handleFields(o),i(o)},a}return D()(t,e),w()(t,[{key:"render",value:function(){var e=this.props,t=e.onAdd,a=e.filter,n=e.form,r=e.i18n,i=n.getFieldDecorator,l=a.name,o=a.address,c=[];return a.createTime&&a.createTime[0]&&(c[0]=ae()(a.createTime[0])),a.createTime&&a.createTime[1]&&(c[1]=ae()(a.createTime[1])),O.a.createElement(h["a"],{gutter:24},O.a.createElement(f["a"],U()({},le,{xl:{span:4},md:{span:8}}),i("name",{initialValue:l})(O.a.createElement(re,{placeholder:r._("Search Name"),onSearch:this.handleSubmit}))),O.a.createElement(f["a"],U()({},le,{xl:{span:4},md:{span:8},id:"addressCascader"}),i("address",{initialValue:o})(O.a.createElement(X["a"],{style:{width:"100%"},options:ne["a"],placeholder:r._("Please pick an address"),onChange:this.handleChange.bind(this,"address"),getPopupContainer:function(){return document.getElementById("addressCascader")}}))),O.a.createElement(f["a"],U()({},le,{xl:{span:6},md:{span:8},sm:{span:12},id:"createTimeRangePicker"}),O.a.createElement(M["c"],{label:r._("CreateTime")},i("createTime",{initialValue:c})(O.a.createElement(ie,{style:{width:"100%"},onChange:this.handleChange.bind(this,"createTime"),getCalendarContainer:function(){return document.getElementById("createTimeRangePicker")}})))),O.a.createElement(f["a"],U()({},oe,{xl:{span:10},md:{span:24},sm:{span:24}}),O.a.createElement(h["a"],{type:"flex",align:"middle",justify:"space-between"},O.a.createElement("div",null,O.a.createElement(y["a"],{type:"primary",className:"margin-right",onClick:this.handleSubmit},O.a.createElement(V["Trans"],{id:"Search"})),O.a.createElement(y["a"],{onClick:this.handleReset},O.a.createElement(V["Trans"],{id:"Reset"}))),O.a.createElement(y["a"],{type:"ghost",onClick:t},O.a.createElement(V["Trans"],{id:"Create"})))))}}]),t}(F["Component"]),c=s))||c)||c),se=ce,de=(a("DZo9"),a("8z0m")),me=(a("Pwec"),a("CtXQ")),ue=(a("miYZ"),a("tsqr"));a("8GaP");function pe(e,t){var a=new FileReader;a.addEventListener("load",function(){return t(a.result)}),a.readAsDataURL(e)}function he(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||ue["a"].error("You can only upload JPG/PNG file!");var a=e.size/1024/1024<2;return a||ue["a"].error("Image must smaller than 2MB!"),t&&a}var fe,ge,ye,ve,Ee=H["a"].Item,ke={labelCol:{span:6},wrapperCol:{span:14}},be=(d=Object(V["withI18n"])(),m=H["a"].create(),d(u=m((p=function(e){function t(){var e,a;b()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=I()(this,(e=_()(t)).call.apply(e,[this].concat(r))),a.state={loading:!1},a.handleOk=function(){var e=a.props,t=e.item,n=void 0===t?{}:t,r=e.onOk,i=e.form,l=i.validateFields,o=i.getFieldsValue;l(function(e){if(!e){var t=E()({},o(),{key:n.key,image:a.state.imageUrl});r(t)}})},a.handleChange=function(e){"uploading"!==e.file.status?"done"===e.file.status&&pe(e.file.originFileObj,function(e){return a.setState({imageUrl:e,loading:!1})}):a.setState({loading:!0})},a}return D()(t,e),w()(t,[{key:"componentDidMount",value:function(){this.setState({imageUrl:this.props.item.image||null})}},{key:"componentWillReceiveProps",value:function(e){console.log("componentWillReceiveProps",e),this.props!==e&&this.setState({imageUrl:e.item.image})}},{key:"render",value:function(){var e=this.props,t=e.item,a=void 0===t?{}:t,n=(e.onOk,e.form),r=e.i18n,i=B()(e,["item","onOk","form","i18n"]),l=n.getFieldDecorator,o=O.a.createElement("div",null,O.a.createElement(me["a"],{type:this.state.loading?"loading":"plus"}),O.a.createElement("div",{className:"ant-upload-text"},"Upload")),c=this.state.imageUrl;return O.a.createElement(L["a"],U()({},i,{onOk:this.handleOk}),O.a.createElement(H["a"],{layout:"horizontal"},O.a.createElement(Ee,U()({label:r._("Title"),hasFeedback:!0},ke),l("title",{initialValue:a.title,rules:[{required:!1}]})(O.a.createElement(ee["a"],null))),O.a.createElement(Ee,U()({label:r._("M\xf4 t\u1ea3"),hasFeedback:!0},ke),l("description",{initialValue:a.description,rules:[{required:!1}]})(O.a.createElement(ee["a"],null))),O.a.createElement(Ee,U()({label:r._("H\xecnh \u1ea3nh"),hasFeedback:!0},ke),l("image",{initialValue:a.image,rules:[{required:!0}]})(O.a.createElement(de["a"],{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,beforeUpload:he,onChange:this.handleChange},c?O.a.createElement("img",{src:c,alt:"avatar",style:{width:"100%"}}):a.image?O.a.createElement("img",{src:a.image,alt:"avatar",style:{width:"100%"}}):o)))))}}]),t}(F["Component"]),u=p))||u)||u),Ce=be,we=(fe=Object(V["withI18n"])(),ge=Object(S["connect"])(function(e){var t=e.banner,a=e.loading;return{banner:t,loading:a}}),fe(ye=ge((ve=function(e){function t(){var e,a;b()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=I()(this,(e=_()(t)).call.apply(e,[this].concat(r))),a.handleRefresh=function(e){var t=a.props.location,n=t.query,r=t.pathname;x["k"].push({pathname:r,search:Object(j["stringify"])(E()({},n,e),{arrayFormat:"repeat"})})},a.handleDeleteItems=function(){var e=a.props,t=e.dispatch,n=e.banner,r=n.list,i=n.pagination,l=n.selectedRowKeys;t({type:"banner/multiDelete",payload:{ids:l}}).then(function(){a.handleRefresh({page:r.length===l.length&&i.current>1?i.current-1:i.current})})},a}return D()(t,e),w()(t,[{key:"render",value:function(){var e=this.props.banner,t=e.selectedRowKeys;return O.a.createElement(M["f"],{inner:!0},O.a.createElement(se,this.filterProps),t.length>0&&O.a.createElement(h["a"],{style:{marginBottom:24,textAlign:"right",fontSize:13}},O.a.createElement(f["a"],null,"Selected ".concat(t.length," items "),O.a.createElement(g["a"],{title:"Are you sure delete these items?",placement:"left",onConfirm:this.handleDeleteItems},O.a.createElement(y["a"],{type:"primary",style:{marginLeft:8}},"Remove")))),O.a.createElement(W,this.listProps),O.a.createElement(Ce,this.modalProps))}},{key:"modalProps",get:function(){var e=this,t=this.props,a=t.dispatch,n=t.banner,r=t.loading,i=t.i18n,l=n.currentItem,o=n.modalVisible,c=n.modalType;return{item:"create"===c?{}:l,visible:o,destroyOnClose:!0,maskClosable:!1,confirmLoading:r.effects["banner/".concat(c)],title:"".concat("create"===c?i._("Create Banner"):i._("Update Banner")),centered:!0,onOk:function(t){a({type:"banner/".concat(c),payload:t}).then(function(){e.handleRefresh()})},onCancel:function(){a({type:"banner/hideModal"})}}}},{key:"listProps",get:function(){var e=this,t=this.props,a=t.dispatch,n=t.banner,r=t.loading,i=n.list,l=n.pagination,o=n.selectedRowKeys;return{dataSource:i,loading:r.effects["banner/query"],pagination:l,onChange:function(t){e.handleRefresh({page:t.current,pageSize:t.pageSize})},onDeleteItem:function(t){a({type:"banner/delete",payload:t}).then(function(){e.handleRefresh({page:1===i.length&&l.current>1?l.current-1:l.current})})},onEditItem:function(e){a({type:"banner/showModal",payload:{modalType:"update",currentItem:e}})},rowSelection:{selectedRowKeys:o,onChange:function(e){a({type:"banner/updateState",payload:{selectedRowKeys:e}})}}}}},{key:"filterProps",get:function(){var e=this,t=this.props,a=t.location,n=t.dispatch,r=a.query;return{filter:E()({},r),onFilterChange:function(t){e.handleRefresh(E()({},t))},onAdd:function(){n({type:"banner/showModal",payload:{modalType:"create"}})}}}}]),t}(F["PureComponent"]),ye=ve))||ye)||ye);t["default"]=we}}]);